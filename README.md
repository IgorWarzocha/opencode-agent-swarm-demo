# Claude Code + OpenCode Swarm Collaboration
## Autonomous Multi-Server AI Agent Coordination

## Overview

This project demonstrates a **powerful collaboration between Claude Code and OpenCode** - where Claude Code's process management capabilities combined with OpenCode's specialized agent system to create a coordinated swarm architecture. This partnership enabled autonomous spawning and coordination of multiple OpenCode servers that communicate with each other to complete complex tasks.

**Key Achievement**: This multi-server system was built through **Claude Code + OpenCode collaboration**, leveraging each system's unique strengths:
- **Claude Code**: Initial setup, background process launch, and task handoff
- **OpenCode**: Specialized agents, server infrastructure, and ongoing orchestration

## üèóÔ∏è Project Structure

**Original Files (Only These Existed Initially)**:
```
.claude/
‚îî‚îÄ‚îÄ skills/
    ‚îú‚îÄ‚îÄ opencode-agent-generator/     # Claude Code skill to create agents
    ‚îú‚îÄ‚îÄ opencode-folder-creator/      # Claude Code skill to create folders
    ‚îú‚îÄ‚îÄ opencode-orchestrator-creator/ # Claude Code skill to create orchestrator
    ‚îî‚îÄ‚îÄ opencode-server-launcher/     # Claude Code skill to launch servers
```

**Generated by Claude Code (Autonomous Creation)**:
```
‚îú‚îÄ‚îÄ .opencode/                        # Generated: Root orchestrator setup
‚îÇ   ‚îú‚îÄ‚îÄ agent/orchestrator.md         # Generated: Orchestrator agent definition
‚îÇ   ‚îú‚îÄ‚îÄ opencode.json                 # Generated: Minimal config
‚îÇ   ‚îî‚îÄ‚îÄ server-pids.txt              # Generated: Process tracking
‚îú‚îÄ‚îÄ haiku-coordinator/               # Generated: Specialized agent folder
‚îÇ   ‚îú‚îÄ‚îÄ .opencode/                   # Generated: Agent server config
‚îÇ   ‚îú‚îÄ‚îÄ AGENTS.md                    # Generated: Communication protocols
‚îÇ   ‚îú‚îÄ‚îÄ moonlight_haikus.md          # Generated: Task output
‚îÇ   ‚îî‚îÄ‚îÄ haiku_collection.md          # Generated: Extended work product
‚îú‚îÄ‚îÄ poetry-translator/               # Generated: Specialized agent folder
‚îú‚îÄ‚îÄ theme-synchronizer/              # Generated: Specialized agent folder
‚îú‚îÄ‚îÄ quality-reviewer/               # Generated: Specialized agent folder
‚îú‚îÄ‚îÄ cultural-advisor/               # Generated: Specialized agent folder
‚îú‚îÄ‚îÄ AGENTS.md                       # Generated: Coordination documentation
‚îú‚îÄ‚îÄ CLAUDE.md                       # Generated: Project instructions
‚îî‚îÄ‚îÄ README.md                       # Generated: This documentation
```

**Key Point**: Everything except `.claude/skills/` was generated through the **Claude Code + OpenCode collaboration**!

## ü§ñ Collaborative Swarm Generation

### How the CC+OC Partnership Built This System

**Step 1: Skill Integration (Claude Code + OpenCode)**
Claude Code invoked OpenCode's specialized skills:
```bash
# Claude Code called OpenCode skills:
Skill opencode-folder-creator      # OC: Created 5 specialized agent folders
Skill opencode-server-launcher     # OC: Launched 6 OpenCode servers
Skill opencode-orchestrator-creator # OC: Created root coordinator
```

**Step 2: Process Management (Claude Code) + Server Infrastructure (OpenCode)**
```bash
# Claude Code managed processes + OpenCode provided servers:
cd haiku-coordinator && opencode serve --port 3001 &
cd poetry-translator && opencode serve --port 3002 &
cd theme-synchronizer && opencode serve --port 3003 &
cd quality-reviewer && opencode serve --port 3004 &
cd cultural-advisor && opencode serve --port 3005 &
cd . && opencode serve --port 3000 &  # OC: Root orchestrator
```

**Step 3: Collaborative Configuration Generation**
- **OpenCode**: Provided agent creation, server infrastructure, and communication protocols
- **Claude Code**: Set up the initial structure and launched background processes
- **Together**: Created a system where OC agents could coordinate with each other

### Generated Server Architecture

1. **Orchestrator (Port 3000)** - Root coordinator for managing swarm operations
2. **Haiku Coordinator (Port 3001)** - Primary task coordination agent
3. **Poetry Translator (Port 3002)** - Specialized translation agent
4. **Theme Synchronizer (Port 3003)** - Consistency management agent
5. **Quality Reviewer (Port 3004)** - Quality assurance agent
6. **Cultural Advisor (Port 3005)** - Cultural validation agent

### Communication Protocol (OC with CC Setup)

The communication protocol is pure OpenCode:
- **OpenCode**: HTTP REST endpoints, JSON payloads, and session management
- **Claude Code**: Just launched the servers and handed off the task
- **OpenCode Orchestrator**: Manages all communication flow between agents
- **Key Innovation**: OC agents maintain conversation context across multiple interactions

## üéØ CC+OC Technical Achievement

### Collaborative Multi-Server Coordination
The **Claude Code + OpenCode partnership** successfully demonstrated:
- ‚úÖ **CC**: Launched 6 OC servers simultaneously using background processes
- ‚úÖ **OC**: Provided specialized agents with unique capabilities
- ‚úÖ **CC+OC**: Generated complete configurations and communication protocols
- ‚úÖ **OC**: Established HTTP APIs for inter-server communication
- ‚úÖ **CC**: Fired up the bash processes and stepped back
- ‚úÖ **OC**: Coordinated complex multi-agent task execution with continuous context

### Why Both Systems Were Essential

**Claude Code's Unique Contributions**:
- **Background Process Launch**: Fire up multiple servers with `&`
- **Skill Invocation**: Call OpenCode skills to set up the structure
- **Initial Setup**: Create folder structure and launch sequence
- **Task Handoff**: Tell the OC orchestrator what to do, then step back

**OpenCode's Essential Contributions**:
- **Specialized Agents**: Domain-specific AI capabilities (haiku, translation, quality review)
- **Server Infrastructure**: Robust multi-server architecture
- **Orchestration**: The OC orchestrator manages all agent coordination
- **Communication Protocols**: HTTP APIs and session management
- **Agent Creation**: Dynamic generation of specialized AI agents
- **Context Persistence**: Maintain conversation state between agent interactions
- **Ongoing Management**: All runtime coordination and task execution

**The Magic of Collaboration**:
- **Setup vs Runtime**: CC sets up, OC runs the show
- **Launch Coordination**: CC gets everyone running, OC takes over
- **Agent Conversations**: OC agents talk to each other with maintained context
- **Neither Could Do It Alone**: CC can launch but can't provide agents, OC has agents but needs help launching multiple servers

### Task Completion (Example Use Case)
The swarm was tasked with creating multilingual haikus to demonstrate the **CC+OC collaboration capabilities**. This served as proof-of-concept for:
- **Multi-agent collaboration**: OC agents working together under OC orchestrator coordination
- **Inter-server communication**: Continuous context maintained across agent conversations
- **Complex task decomposition**: OC orchestrator coordinates, OC specialists execute
- **Quality assurance workflows**: Multi-layer validation through agent interactions

*Note: The haiku content demonstrated the **continuous agent conversations** - the real achievement was the **CC setup + OC collaborative infrastructure** that enabled agents to talk to each other with persistent context.*

## üöÄ CC+OC Technical Implementation

### Collaborative Server Launch
```bash
# Claude Code (process management) + OpenCode (servers):
cd haiku-coordinator && opencode serve --port 3001 &  # CC manages, OC serves
cd poetry-translator && opencode serve --port 3002 &   # CC manages, OC serves
cd theme-synchronizer && opencode serve --port 3003 &  # CC manages, OC serves
cd quality-reviewer && opencode serve --port 3004 &    # CC manages, OC serves
cd cultural-advisor && opencode serve --port 3005 &    # CC manages, OC serves
cd . && opencode serve --port 3000 &                   # CC manages, OC orchestrates
```

### API Communication (Pure OpenCode)
```bash
# Session creation (OC orchestrator manages):
curl -X POST "http://localhost:3000/session" \
  -H "Content-Type: application/json" \
  -d '{"title": "Swarm Coordination Task"}'

# Agent communication (OC agents converse via OC orchestrator):
curl -X POST "http://localhost:3000/session/{id}/message" \
  -H "Content-Type: application/json" \
  -d '{
    "agent": "specialized-agent",      # OC: specialized capability
    "model": {"providerID": "zai-coding-plan", "modelID": "glm-4.6"},
    "parts": [{"type": "text", "text": "Agent conversation..."}]
  }'
```

### Process Monitoring (CC Setup) + Health Checks (OC Runtime)
```bash
# Claude Code launched processes + OpenCode provides health endpoints:
curl -s "http://localhost:3001/config"  # OC: server status
curl -s "http://localhost:3001/agent"   # OC: agent capabilities
ps aux | grep "opencode serve"         # CC: initial launch verification
```

### Skill Integration (CC Calls OC Skills)
```bash
# Claude Code calls OpenCode skills for setup:
Skill opencode-folder-creator      # OC: creates agents, CC: invokes skill
Skill opencode-server-launcher     # OC: launches servers, CC: invokes skill
Skill opencode-orchestrator-creator # OC: creates orchestrator, CC: invokes skill
```

## üìä CC+OC Performance Metrics

### Collaborative System Generation
- **Total Servers**: 6 OpenCode servers (5 specialized agents + 1 orchestrator)
- **Process Management**: Claude Code managed all 6 background processes simultaneously
- **Agent Capabilities**: OpenCode provided specialized AI agents with unique skills
- **Communication**: Continuous context maintained across all agent conversations
- **Setup Time**: ~2-3 minutes for complete CC+OC collaborative infrastructure

### Partnership Task Execution
1. **Skill Invocation**: Claude Code called 4 OpenCode skills for setup
2. **Server Launch**: CC launched background processes, OC provided servers
3. **Agent Creation**: OC generated specialized agents via skills
4. **Communication**: OC orchestrator managed all agent conversations
5. **Task Handoff**: CC told OC orchestrator the task, then stepped back

### Collaborative Capabilities Demonstrated
- **Setup vs Runtime**: CC handles setup, OC handles all runtime coordination
- **Agent Conversations**: OC agents talk to each other with persistent context
- **Task Delegation**: OC orchestrator delegates to specialized OC agents
- **Context Persistence**: OC maintains conversation state between agents
- **Multi-Server Launch**: CC can launch multiple OC servers simultaneously

## üîß CC+OC Generated Configuration

### Collaborative Orchestrator Config
```json
{
  "$schema": "https://opencode.ai/config.json",
  "theme": "opencode",
  "autoupdate": true
}
```
*Generated through CC+OC collaboration*

### Agent Folder Structures (CC Setup, OC Content)
Each agent folder contains files from the collaboration:
- `.opencode/opencode.json` - OC server configuration, launched by CC
- `.opencode/agent/{agent-name}.md` - OC agent definition, created via CC skill invocation
- `AGENTS.md` - OC communication protocol, generated by OC skill
- `package.json` - OC dependencies via skill, called by CC

### Collaborative Design Achievements
- **Setup vs Runtime**: CC handles setup, OC handles runtime behavior
- **Skill-Based Generation**: OC skills create content, CC invokes skills
- **Clean Separation**: CC launches, OC runs
- **Perfect Integration**: CC skill system ‚Üî OC capabilities

## üéØ Why the CC+OC Partnership Matters

### What Each System Brought to the Table

**Claude Code's Essential Contributions**:
1. **Multi-Server Launch**
   - Launch multiple OC servers simultaneously with `&`
   - Handle background process initialization
   - Set up the infrastructure for OC to use

2. **Skill Invocation**
   - Call OC skills to create the swarm structure
   - Pass task requirements to OC orchestrator
   - Handle the initial setup sequence

3. **Task Handoff**
   - Tell the OC orchestrator what task to accomplish
   - Step back and let OC handle the execution
   - No ongoing involvement after launch

**OpenCode's Essential Contributions**:
1. **Specialized Agent Ecosystem**
   - Domain-specific AI capabilities
   - Robust server infrastructure
   - Dynamic agent creation

2. **Communication Framework**
   - HTTP APIs and session management
   - Context persistence between conversations
   - Agent-to-agent communication protocols

3. **Server Infrastructure**
   - Multi-server architecture
   - Health check endpoints
   - Configuration management

### The Partnership Magic
**Neither Could Do This Alone**:
- **Claude Code without OpenCode**: Can launch processes but has no agents to run
- **OpenCode without Claude Code**: Has amazing agents but struggles to launch multiple servers
- **Together**: CC launches the swarm, OC agents do the actual work

**Beyond Traditional Automation**:
- **Not just scripts**: Dynamic, adaptive CC+OC collaboration
- **Not just deployment**: Complete living ecosystem creation
- **Not just monitoring**: Intelligent inter-agent coordination
- **Not just configuration**: Conversational agent ecosystem

## üîÑ CC+OC Collaborative Workflow

### 8-Step Partnership Generation
1. ‚úÖ **Skill Bridge** - Claude Code called OpenCode skills for setup
2. ‚úÖ **Folder Creation** - OC skill created agent folders, CC invoked skill
3. ‚úÖ **Agent Generation** - OC skill defined agents, CC called the skill
4. ‚úÖ **Server Launch** - OC provided servers, CC launched background processes
5. ‚úÖ **Configuration** - OC skill generated configs, CC handled file creation
6. ‚úÖ **Protocol Setup** - OC established APIs, CC verified servers were running
7. ‚úÖ **Orchestrator** - OC created coordinator, CC launched it
8. ‚úÖ **Task Handoff** - CC told OC orchestrator the task, then stepped back

### Partnership Capabilities
- **Multi-Server Launch (CC)**: Launch multiple OC servers simultaneously
- **Agent Infrastructure (OC)**: Provide all runtime capabilities
- **Session Management (OC)**: Maintain conversations between agents
- **Task Execution (OC)**: Agents coordinate and complete the work
- **Setup Coordination (CC)**: Handle the initial infrastructure setup

## üõ†Ô∏è Technical Insights

### CC+OC vs Traditional Automation
**Traditional Approach**:
- Manual script writing
- Static configuration files
- Limited process management
- No dynamic adaptation
- No agent specialization

**CC+OC Collaborative Approach**:
- **Claude Code**: Multi-server launch + task handoff
- **OpenCode**: Dynamic agent creation + ongoing orchestration
- **Together**: Infrastructure setup + intelligent agent ecosystem

### Key Technical Achievements
1. **Multi-Server Launch**: CC launches 6 OC servers simultaneously
2. **Dynamic Agent Creation**: OC creates specialized agents via CC skill invocation
3. **Perfect Skill Integration**: Seamless CC skill system ‚Üî OC capabilities
4. **Agent Conversations**: OC agents talk with context, OC orchestrator manages flow
5. **Clean Separation**: CC handles setup, OC handles all runtime behavior

### The Secret Sauce: Context Persistence
**What Makes This Special**:
- Agents don't just complete tasks - they have conversations
- Context is maintained across multiple agent interactions
- Workflows adapt based on ongoing agent dialogue
- The system learns and evolves through agent conversations

## üîÆ Potential Applications

This **CC+OC collaboration** enables:
- **Living Microservices**: Autonomous creation + continuous agent coordination
- **Conversational APIs**: Dynamic endpoints + context-aware agent interactions
- **Adaptive Systems**: CC orchestration + OC specialized problem-solving
- **Intelligent Workflows**: CC process management + OC domain expertise
- **Collaborative AI**: Multi-agent systems with continuous conversation capabilities

## üìù Partnership Conclusion

This project demonstrates the **powerful collaboration between Claude Code and OpenCode** - two systems coming together to create something neither could achieve alone. Starting with only the `.claude/skills/` directory, the partnership created a complete swarm architecture where specialized agents have continuous conversations with persistent context.

**The real achievement isn't just the infrastructure - it's enabling agents to talk to each other intelligently.**

### What the CC+OC Partnership Accomplished:
- ‚úÖ **6 specialized OC servers** launched by CC using background processes
- ‚úÖ **24+ configuration files** generated through OC skills called by CC
- ‚úÖ **Continuous agent conversations** managed by OC orchestrator
- ‚úÖ **Dynamic task delegation** handled by OC orchestrator
- ‚úÖ **Complete setup workflow** from CC skills to running OC ecosystem

### Why This Partnership Matters:
- **Claude Code**: Provides the multi-server launch capability
- **OpenCode**: Provides the specialized agents and ongoing orchestration
- **Together**: Enable complex multi-agent systems through simple setup

**Status**: ‚úÖ **Partnership Success** - Demonstrated the power of CC+OC collaborative intelligence.

---

*Generated through Claude Code + OpenCode collaboration - showcasing what's possible when systems work together*